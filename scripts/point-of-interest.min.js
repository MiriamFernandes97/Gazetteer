class PointOfInterest{constructor(t,e,i,a,s,n){this.latitude=t,this.longitude=e,this.geonameId=i,this.name=a,this.population=s,this.type=n}deg2rad(t){return t*(Math.PI/180)}getDistanceFromLatLonInKm(t,e){const i=this.deg2rad(this.latitude-t),a=this.deg2rad(this.longitude-e),s=Math.sin(i/2)*Math.sin(i/2)+Math.cos(this.deg2rad(t))*Math.cos(this.deg2rad(this.latitude))*Math.sin(a/2)*Math.sin(a/2),n=6371*(2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)));this.distance=n.toFixed()}getWikiDetails(){$.ajax({url:"php/getWikiUrl.php",dataType:"json",type:"POST",data:{geonameId:this.geonameId}}).then(t=>{const e=t.data;this.timeZone=e.timezone.timeZoneId,this.wikiUrl=e.wikipediaURL;const i=this.wikiUrl.split("/")[2];this.displayInfo(),$.ajax({url:"php/getWikiSummary.php",dataType:"json",type:"POST",data:{titles:i}}).done(t=>{const e=Object.values(t.data)[0].extract.replace("(listen)","");this.cleanExtract=e.replace(/\((listen)\)/,"");this.cleanerExtract=this.cleanExtract.replace(/\(( )\)/,""),this.displayWikiDetails()}).fail(()=>{this.displayInfo(),this.wikiFailure()})}).fail(()=>{this.displayInfo(),this.wikiFailure()})}displayWikiDetails(){$("#modalBody").html(`${this.cleanerExtract}<br><a href=https://${this.wikiUrl} target="_blank">Full Wikipedia Article</a>`)}getTime(){const t=new Date;this.time=t.toLocaleString("en-GB",{timeZone:this.timeZone,timeStyle:"short"})}wikiFailure(){$("#modalBody").html(`No wikipedia article could be found for this ${this.type}.`)}getWeatherInfo(){$.ajax({url:"php/getWeatherForecast.php",type:"POST",dataType:"json",data:{lat:this.latitude,lon:this.longitude}}).done(t=>{this.currentWeather=t.data.current.weather[0],this.currentTemp=t.data.current.temp,this.humidity=t.data.current.humidity,this.pressure=t.data.current.pressure,this.dailyWeather=t.data.daily,this.displayWeather()}).fail((t,e,i)=>{alert(`${e} is the ERROR!!`)})}displayWeather(){let t=0;this.dailyWeather.forEach(e=>{const i=new Date(1e3*e.dt).toLocaleString("en-GB",{timeZone:this.timeZone,weekday:"long"});$(`#forecastImg${t}`).attr("src",`https://openweathermap.org/img/wn/${e.weather[0].icon}@2x.png`),$(`#forecast${t}`).html(`<li>${i}</li><li>${e.weather[0].description}</li><li>Min Temp:&nbsp;${e.temp.min.toFixed()}&#8451;</li><li>Max Temp:&nbsp;${e.temp.max.toFixed()}&#8451;</li>`),t++}),$("#weatherImage").attr("src",`https://openweathermap.org/img/wn/${this.currentWeather.icon}@2x.png`),$("#weatherModalList").html(`<li>${this.currentWeather.description}</li><li>Temperature:&nbsp; ${this.currentTemp.toFixed()}&#8451;</li><li>Humidity:&nbsp;${this.humidity}%</li><li>Pressure:&nbsp${this.pressure}mb</li>`)}}class Monument extends PointOfInterest{constructor(t,e,i,a){super(t,e,i,a),this.type="monument"}displayInfo(){this.getTime(),$("#modalTitle").html(`${this.name}`),$("#modalInfo").html(`<li>Current Time: &nbsp; ${this.time}</li><li>Latitude: &nbsp; ${this.latitude}</li><li>Longitude: &nbsp; ${this.longitude}</li><li>Distance from your location: &nbsp; ${this.distance}km</li>`),$("#wikiInfo").removeClass("show"),$("#forecastInfo").removeClass("show"),$("#weatherInfo").removeClass("show"),$("#generalInfo").addClass("show"),$("#infoModal").modal()}}class City extends PointOfInterest{constructor(t,e,i,a,s,n){super(t,e,i,a,s,n)}displayInfo(){this.getTime(),$("#modalTitle").html(`${this.name}`),$("#modalInfo").html(`<li>Current Time: &nbsp; ${this.time}</li><li>Estimated Population: &nbsp; ${this.population}</li>\n      <li>Latitude: &nbsp; ${this.latitude}</li><li>Longitude: &nbsp; ${this.longitude}</li><li>Distance from your location: &nbsp; ${this.distance}km</li>`),$("#wikiInfo").removeClass("show"),$("#forecastInfo").removeClass("show"),$("#weatherInfo").removeClass("show"),$("#generalInfo").addClass("show"),$("#infoModal").modal()}}